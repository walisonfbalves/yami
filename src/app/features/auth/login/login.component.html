<div
  class="flex h-screen w-full flex-row overflow-hidden font-display bg-stone-50 dark:bg-background"
>
  <!-- Left Side: Immersive Image -->
  <div class="hidden lg:flex w-1/2 relative bg-stone-900">
    <!-- Background Image -->
    <div
      class="absolute inset-0 w-full h-full bg-cover bg-center"
      style="
        background-image: url(&quot;https://lh3.googleusercontent.com/aida-public/AB6AXuCopDkpQaarju4nn4juJgycMdcBx9JXAbKy_mJQEL5kiJgCnsQNcXbu83Sy7JTKnBaAGvEw4pHb6m_wvOujoVhtrNcDpSeNI-b-SRSXQx6sxxsxmKvxvBcYZZuGn-Q8I6r0xEY27BozFEuw7MUa9TgQSmg3CVZcO9FIAhYXW6uGlJ9J_1Bt3K434YsyZvI-rN9IZ3Hi818fqvsD3UBYz5KYAE895eMVHnIOhD1PVmQDR4_EepVAgnHKKfV8SAqh-i8i0jNp9uzcSYc&quot;);
      "
    ></div>
    <!-- Overlay -->
    <div
      class="absolute inset-0 bg-gradient-to-t from-stone-950/80 via-transparent to-stone-950/30"
    ></div>
    <div class="relative z-10 flex flex-col justify-end p-12 w-full">
      <blockquote class="max-w-lg">
        <p
          class="font-heading text-4xl text-white font-medium leading-tight mb-4"
        >
          "O ingrediente secreto é sempre amor. E um pouquinho de sal."
        </p>
        <footer class="text-primary font-display font-medium text-lg">
          — Filosofia Yami
        </footer>
      </blockquote>
    </div>
  </div>

  <!-- Right Side: Login Form -->
  <div
    class="flex-1 w-full lg:w-1/2 bg-white dark:bg-[#0f0e0c] flex flex-col items-center justify-center p-6 md:p-12 lg:p-24 overflow-y-auto"
  >
    <div class="w-full max-w-md flex flex-col gap-8">
      <!-- Logo & Header -->
      <div class="text-center space-y-2">
        <div class="inline-flex items-center justify-center mb-4">
          <span class="material-symbols-outlined text-primary text-5xl mr-2"
            >restaurant_menu</span
          >
          <h1
            class="text-primary font-heading text-5xl font-bold tracking-tight uppercase"
          >
            Yami
          </h1>
        </div>
        <h2
          class="text-3xl font-heading font-medium text-stone-900 dark:text-white"
        >
          Bem-vindo
        </h2>
        <p class="text-stone-500 dark:text-stone-400 font-display">
          Digite seus dados para acessar seus pedidos.
        </p>
      </div>

      <!-- Tab Selector -->
      <div class="grid grid-cols-2 gap-4 w-full mb-6">
        <button
          type="button"
          (click)="toggleTab('login')"
          [class.bg-primary]="activeTab === 'login'"
          [class.text-primary-content]="activeTab === 'login'"
          [class.font-bold]="activeTab === 'login'"
          [class.border-primary]="activeTab === 'login'"
          [class.text-stone-500]="activeTab !== 'login'"
          [class.border-transparent]="activeTab !== 'login'"
          [class.hover:text-stone-900]="activeTab !== 'login'"
          [class.dark:hover:text-stone-200]="activeTab !== 'login'"
          class="h-12 w-full flex items-center justify-center border-b-2 transition-all text-sm rounded-t-md"
        >
          Entrar
        </button>
        <button
          type="button"
          (click)="toggleTab('register')"
          [class.bg-primary]="activeTab === 'register'"
          [class.text-primary-content]="activeTab === 'register'"
          [class.font-bold]="activeTab === 'register'"
          [class.border-primary]="activeTab === 'register'"
          [class.text-stone-500]="activeTab !== 'register'"
          [class.border-transparent]="activeTab !== 'register'"
          [class.hover:text-stone-900]="activeTab !== 'register'"
          [class.dark:hover:text-stone-200]="activeTab !== 'register'"
          class="h-12 w-full flex items-center justify-center border-b-2 transition-all text-sm rounded-t-md"
        >
          Cadastrar
        </button>
      </div>

      <!-- Login Form -->
      <form
        [formGroup]="loginForm"
        (ngSubmit)="onSubmit()"
        *ngIf="activeTab === 'login'"
        class="flex flex-col gap-6"
      >
        <ui-input
          label="Email ou Usuário"
          [control]="$any(loginForm.get('email'))"
          type="text"
          placeholder="chef@yami.com ou nome-de-usuario"
          icon="account_circle"
        >
        </ui-input>

        <div class="space-y-2">
          <div class="flex justify-end">
            <a
              class="text-xs font-semibold text-primary hover:text-amber-400 transition-colors cursor-pointer"
              >Esqueceu a senha?</a
            >
          </div>
          <ui-input
            label="Senha"
            [control]="$any(loginForm.get('password'))"
            type="password"
            placeholder="••••••••"
            icon="lock"
          >
          </ui-input>
        </div>

        <div class="flex items-center">
          <ui-checkbox
            label="Lembrar de mim por 30 dias"
            id="remember-me"
            [control]="$any(loginForm.get('rememberMe'))"
          >
          </ui-checkbox>
        </div>

        <ui-button
          type="submit"
          variant="primary"
          [fullWidth]="true"
          [loading]="isLoading"
        >
          ENTRAR
        </ui-button>
      </form>

      <!-- Register Form -->
      <form
        [formGroup]="registerForm"
        (ngSubmit)="onSubmit()"
        *ngIf="activeTab === 'register'"
        class="flex flex-col gap-6"
      >
        <!-- Nome Completo -->
        <div>
          <ui-input
            label="Nome Completo"
            [control]="$any(registerForm.get('name'))"
            type="text"
            placeholder="Seu nome completo"
            icon="badge"
          >
          </ui-input>
          <div
            *ngIf="
              registerForm.get('name')?.invalid &&
              registerForm.get('name')?.touched
            "
            class="text-danger text-xs mt-1"
          >
            <span *ngIf="registerForm.get('name')?.errors?.['minlength']"
              >Mínimo 6 caracteres.</span
            >
            <span *ngIf="registerForm.get('name')?.errors?.['required']"
              >Digite seu nome completo.</span
            >
          </div>
        </div>

        <!-- Login / User -->
        <div>
          <ui-input
            label="Login (Usuário)"
            [control]="$any(registerForm.get('login'))"
            type="text"
            placeholder="seu-usuario"
            icon="alternate_email"
          >
          </ui-input>
          <p class="text-xs text-stone-500 mt-1 dark:text-stone-400">
            Este será seu usuário único.
          </p>
          <div
            *ngIf="
              registerForm.get('login')?.invalid &&
              registerForm.get('login')?.touched
            "
            class="text-danger text-xs mt-1"
          >
            <span *ngIf="registerForm.get('login')?.errors?.['minlength']"
              >Mínimo 3 caracteres.</span
            >
            <span *ngIf="registerForm.get('login')?.errors?.['pattern']"
              >Apenas letras minúsculas, números e hifens.</span
            >
            <span *ngIf="registerForm.get('login')?.errors?.['required']"
              >Digite um usuário.</span
            >
          </div>
        </div>

        <!-- Email -->
        <div>
          <ui-input
            label="E-mail Profissional"
            [control]="$any(registerForm.get('email'))"
            type="email"
            placeholder="chef@yami.com"
            icon="mail"
          >
          </ui-input>
          <div
            *ngIf="
              registerForm.get('email')?.invalid &&
              registerForm.get('email')?.touched
            "
            class="text-danger text-xs mt-1"
          >
            <span *ngIf="registerForm.get('email')?.errors?.['email']"
              >E-mail inválido.</span
            >
            <span *ngIf="registerForm.get('email')?.errors?.['required']"
              >Digite seu e-mail.</span
            >
          </div>
        </div>

        <!-- Icons for password match check could be handled inside input component or via external logic, 
                     but standard input error display is usually enough if the component supports it. 
                     Since ui-input doesn't seem to have explicit error slot shown in previous view_file, 
                     we add it externally here for specific feedback or rely on touched class. 
                     We are adding explicit messages below inputs for clarity as requested. -->

        <!-- Senha -->
        <div>
          <ui-input
            label="Senha"
            [control]="$any(registerForm.get('password'))"
            type="password"
            placeholder="Mínimo 8 caracteres"
            icon="lock"
          >
          </ui-input>
          <div
            *ngIf="
              registerForm.get('password')?.invalid &&
              registerForm.get('password')?.touched
            "
            class="text-danger text-xs mt-1"
          >
            <span *ngIf="registerForm.get('password')?.errors?.['minlength']"
              >Mínimo 8 caracteres.</span
            >
            <span *ngIf="registerForm.get('password')?.errors?.['required']"
              >Digite uma senha.</span
            >
          </div>
        </div>

        <!-- Confirmar Senha -->
        <div>
          <ui-input
            label="Confirmar Senha"
            [control]="$any(registerForm.get('confirmPassword'))"
            type="password"
            placeholder="Repita a senha"
            icon="lock_clock"
          >
          </ui-input>
          <div
            *ngIf="
              registerForm
                .get('confirmPassword')
                ?.hasError('passwordMismatch') &&
              registerForm.get('confirmPassword')?.touched
            "
            class="text-danger text-xs mt-1"
          >
            As senhas não conferem.
          </div>
        </div>

        <!-- Termos de Uso -->
        <div class="flex items-start">
          <ui-checkbox
            id="terms-check"
            [control]="$any(registerForm.get('terms'))"
          >
            Li e concordo com os
            <a
              routerLink="/legal/terms"
              target="_blank"
              class="text-primary hover:underline cursor-pointer"
              >Termos de Uso</a
            >
            e
            <a
              routerLink="/legal/privacy"
              target="_blank"
              class="text-primary hover:underline cursor-pointer"
              >Política de Privacidade</a
            >.
          </ui-checkbox>
        </div>

        <!-- Validation Message for Terms if touched and invalid -->
        <div
          *ngIf="
            registerForm.get('terms')?.invalid &&
            registerForm.get('terms')?.touched
          "
          class="text-danger text-xs ml-2 -mt-4"
        >
          Você precisa aceitar os termos para continuar.
        </div>

        <!-- Submit Button -->
        <ui-button
          type="submit"
          variant="primary"
          [fullWidth]="true"
          [disabled]="registerForm.invalid"
          [loading]="isLoading"
        >
          CRIAR CONTA
        </ui-button>
      </form>

      <!-- Footer Text -->
      <p class="text-center text-sm text-stone-500 dark:text-stone-400 mt-4">
        Não tem uma conta?
        <a
          class="font-bold text-primary hover:text-amber-400 transition-colors"
          href="#"
          >Cadastre-se grátis</a
        >
      </p>
    </div>
  </div>
</div>
